function bulkUpload(){var e=new Ext.FormPanel({id:"buf",fileUpload:true,labelWidth:100,frame:true,title:"Bulk Upload",bodyStyle:"padding:5px 5px 0",width:495,height:450,defaults:{width:230},items:[fileUpload("File","file"),comboBox("Parent Category","parent_id")],buttons:[actionButton("Upload","silk-folder-go","php/category/bulkUpload.php","Uploading","buf",refreshCategories),cancelButton("buf")]});return e}function refreshCategories(){var e=Ext.getCmp("categoryPane");var t=new Ext.LoadMask("categoryPane",{msg:"Loading categories...",removeMask:true});t.show();var n=e.getRootNode();e.getLoader().load(n,function(){t.hide()});n.expand()}function newCategory(){var e=new Ext.FormPanel({id:"ncf",labelWidth:100,frame:true,title:"New Category",bodyStyle:"padding:5px 5px 0",width:495,height:450,defaults:{width:230},items:[textField("Name","name"),comboBox("Parent Category","parent_id")],buttons:[actionButton("Add","silk-folder-add","php/category/newCategory.php","Adding Category","ncf",refreshCategories),cancelButton("ncf")]});return e}function editCategory(){var e=new Ext.FormPanel({id:"ecf",labelWidth:100,frame:true,title:"Edit Category",bodyStyle:"padding:5px 5px 0",width:495,height:450,defaults:{width:230},items:[comboBox("Category","category_id"),textField("New Name","name"),comboBox("New Parent Category","parent_id")],buttons:[actionButton("Update","silk-folder-edit","php/category/editCategory.php","Updating category","ecf",refreshCategories),cancelButton("ecf")]});return e}function deleteCategory(){var e=new Ext.FormPanel({id:"dcf",labelWidth:100,frame:true,title:"Delete Category",bodyStyle:"padding:5px 5px 0",width:495,height:450,defaults:{width:230},items:[comboBox("Delete","category_id")],buttons:[actionButton("Delete","silk-folder-delete","php/category/deleteCategory.php","Removing category","dcf",refreshCategories),cancelButton("dcf")]});return e}function getSelectedCategory(){return categoryPane.getSelectionModel().getSelectedNode()}var categoryMenu=new Ext.menu.Menu({items:[menuItem("rcm","Refresh Categories","silk-arrow-refresh",refreshCategories,false),"-",menuItem("ncm","Add Category","silk-folder-add",newCategory),menuItem("ecm","Edit Category","silk-folder-edit",editCategory),menuItem("dcm","Delete Category","silk-folder-delete",deleteCategory),"-",menuItem("bucm","Bulk Upload","silk-folder-go",bulkUpload)],listeners:{itemclick:function(e){switch(e.id){case"ncm":var t=Ext.getCmp("categoryPane").getSelectionModel().getSelectedNode();if(t!=null&&(t.parentNode||t.text=="All")){var n=Ext.getCmp("ncf");var r=n.get(0);var i=n.get(1);i.getStore().load({callback:function(){i.setValue(t.id)}});r.setValue("New Category")}break;case"ecm":var t=Ext.getCmp("categoryPane").getSelectionModel().getSelectedNode();if(t!=null&&t.parentNode){var s=Ext.getCmp("ecf");var i=s.get(0);var r=s.get(1);var o=s.get(2);i.getStore().load({callback:function(){i.setValue(t.id)}});o.getStore().load({callback:function(){o.setValue(t.parentNode.id)}});r.setValue(t.attributes["name"])}break;case"dcm":var t=Ext.getCmp("categoryPane").getSelectionModel().getSelectedNode();if(t!=null&&t.parentNode){var i=Ext.getCmp("dcf").get(0);i.getStore().load({callback:function(){i.setValue(t.id)}})}break;case"bucm":var t=Ext.getCmp("categoryPane").getSelectionModel().getSelectedNode();if(t!=null&&(t.parentNode||t.text=="All")){var n=Ext.getCmp("buf");var r=n.get(0);var i=n.get(1);i.getStore().load({callback:function(){i.setValue(t.id)}});r.setValue("Upload File")}break;case"crv":var t=Ext.getCmp("categoryPane").getSelectionModel().getSelectedNode();var u=Ext.getCmp("rf").get(0);u.getStore().load({callback:function(){u.setValue(t.id)}});break}}}});var categoryPane=new Ext.tree.TreePanel({id:"categoryPane",autoScroll:true,animate:true,enableDD:false,containerScroll:true,border:true,width:200,height:450,dataUrl:"php/category/categoryPane.php",root:{nodeType:"async",text:"All",draggable:false,id:"0"},rootVisible:false,contextMenu:categoryMenu,listeners:{contextmenu:function(e,t){e.select();var n=e.getOwnerTree().contextMenu;n.contextNode=e;n.showAt(t.getXY())}}});categoryPane.on("click",function(e,t){cardGrid.store.load({params:{category_id:e.id}})});categoryPane.render("leftColumn");var catMask=new Ext.LoadMask("categoryPane",{msg:"Loading categories...",removeMask:true});catMask.show();categoryPane.getRootNode().expand(false,true,function(){catMask.hide()})